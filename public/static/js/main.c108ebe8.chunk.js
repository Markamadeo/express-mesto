(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),s=n(6),o=n.n(s),i=n(9),l=n(2);var u=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__text",children:"\xa9 2020 Mesto Russia"})})},d=n.p+"static/media/header__logo.c2821b38.svg";var m=function(){return Object(a.jsx)("section",{className:"header header_shift_down header_shift_up",children:Object(a.jsx)("img",{src:d,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"})})};var f=function(e){return Object(a.jsx)("section",{className:"form form_type_foto-viewer ".concat(e.isOpen&&"form_status_active"),children:Object(a.jsxs)("figure",{className:"form__container form__container_type_foto-viewer",children:[Object(a.jsx)("button",{type:"button",onClick:e.onClose,className:"form__close-button form__close-button_type_foto-viewer-close-button"}),Object(a.jsx)("img",{src:e.card.link,alt:e.card.name,className:"form__foto-viewer-img"}),Object(a.jsx)("figcaption",{className:"form__foto-viewer-description",children:e.card.name})]})})},j=Object(r.createContext)();var b=function(e){var t=e.card,n=e.onClickCard,c=e.onCardLike,s=e.onCardDelete,o=Object(r.useContext)(j),i=t.likes.some((function(e){return e._id===o._id})),l="gallery-item__heart-button ".concat(i&&"gallery-item__heart-button_type_active"),u=t.owner._id===o._id;return Object(a.jsxs)("li",{className:"gallery-item",children:[u&&Object(a.jsx)("button",{onClick:function(){s(t)},type:"button",className:"gallery-item__trash-button"}),Object(a.jsx)("img",{onClick:function(){n(t)},src:t.link,alt:t.name,className:"gallery-item__image"}),Object(a.jsxs)("div",{className:"gallery-item__content",children:[Object(a.jsx)("h2",{className:"gallery-item__title",children:t.name}),Object(a.jsxs)("div",{className:"gallery-item__like-container",children:[Object(a.jsx)("button",{onClick:function(){c(t)},type:"button",className:l}),Object(a.jsx)("p",{className:"gallery-item__like-counter",children:t.likes.length})]})]})]})};var h=function(e){var t=Object(r.useContext)(j);return Object(a.jsxs)("div",{className:"page__container",children:[Object(a.jsxs)("section",{className:"profile profile_shift_down",children:[Object(a.jsxs)("div",{className:"profile__avatar-container",children:[Object(a.jsx)("img",{src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__image"}),Object(a.jsx)("button",{onClick:e.onEditAvatar,className:"profile__avatar-button"})]}),Object(a.jsxs)("div",{className:"profile__info-container",children:[Object(a.jsxs)("div",{className:"profile__info-container-item",children:[Object(a.jsx)("h1",{className:"profile__full-name",children:t.name}),Object(a.jsx)("button",{onClick:e.onEditProfile,type:"button",className:"profile__edit-botton"})]}),Object(a.jsx)("div",{className:"profile__info-container-item",children:Object(a.jsx)("p",{className:"profile__description",children:t.about})})]}),Object(a.jsx)("button",{onClick:e.onAddPlace,type:"button",className:"profile__add-botton"})]}),Object(a.jsx)("ul",{className:"gallery gallery_shift_down",children:e.cards.map((function(t){return Object(a.jsx)(b,{card:t,onClickCard:e.onClickCard,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})]})},_=n(7),O=n(8),p=new(function(){function e(t){Object(_.a)(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}return Object(O.a)(e,[{key:"getUserInfo",value:function(){return fetch(this.baseUrl+"/users/me",{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status))})).catch((function(e){return alert(e)}))}},{key:"initialCards",value:function(){return fetch(this.baseUrl+"/cards",{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0433\u0430\u043b\u0435\u0440\u0435\u0438, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status))})).catch((function(e){return alert(e)}))}},{key:"sendProfileInfo",value:function(e){return fetch(this.baseUrl+"/users/me",{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status))})).catch((function(e){return alert(e)}))}},{key:"sendNewCard",value:function(e){return fetch(this.baseUrl+"/cards",{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status))})).catch((function(e){return alert(e)}))}},{key:"deleteCard",value:function(e){return fetch(this.baseUrl+"/cards/".concat(e),{method:"DELETE",headers:this.headers}).then((function(e){if(!e.ok)return Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status));console.log("\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430!")})).catch((function(e){return alert(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){return t?fetch(this.baseUrl+"/cards/likes/".concat(e),{method:"PUT",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c like, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status))})).catch((function(e){return alert(e)})):t?void 0:fetch(this.baseUrl+"/cards/likes/".concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043d\u044f\u0442\u044c like, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status))})).catch((function(e){return alert(e)}))}},{key:"changeAvatar",value:function(e){return fetch(this.baseUrl+"/users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440, \u0441\u0442\u0430\u0442\u0443\u0441 ".concat(e.status))})).catch((function(e){return alert(e)}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"ce46bc36-f433-488f-bf62-df1955cfcd45","Content-Type":"application/json"}});var x=function(e){return Object(a.jsx)("section",{className:"form form_type_".concat(e.name," ").concat(e.isOpen&&"form_status_active"),children:Object(a.jsxs)("form",{onSubmit:e.onSubmit,className:"form__container form__container_type_submit-form",name:"".concat(e.name,"Popup"),noValidate:!0,children:[Object(a.jsx)("button",{onClick:e.onClose,type:"button",className:"form__close-button"}),Object(a.jsx)("h2",{className:"form__title",children:e.title}),e.children,Object(a.jsx)("button",{name:"".concat(e.name,"Submit"),type:"submit",className:"form__submit-button",children:e.buttonText})]})})};var v=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,s=Object(r.useContext)(j),o=Object(r.useState)(s.name),i=Object(l.a)(o,2),u=i[0],d=i[1],m=Object(r.useState)(s.about),f=Object(l.a)(m,2),b=f[0],h=f[1];return Object(r.useEffect)((function(){d(s.name),h(s.about)}),[s]),Object(a.jsxs)(x,{onSubmit:function(e){e.preventDefault(),c({name:u,about:b})},name:"edit",isOpen:t,onClose:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(a.jsxs)("div",{className:"form__input-container",children:[Object(a.jsx)("input",{value:u,onChange:function(e){d(e.target.value)},name:"fullName",type:"text",className:"form__textinput form__textinput_type_edit-full-name",required:!0,minLength:"2",maxLength:"40"}),Object(a.jsx)("span",{className:"form__error",id:"fullName-error"})]}),Object(a.jsxs)("div",{className:"form__input-container",children:[Object(a.jsx)("input",{value:b,onChange:function(e){h(e.target.value)},name:"description",type:"text",className:"form__textinput form__textinput_type_edit-description",required:!0,minLength:"2",maxLength:"200"}),Object(a.jsx)("span",{className:"form__error",id:"description-error"})]})]})};var N=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,s=Object(r.useRef)();return Object(a.jsx)(x,{onSubmit:function(e){e.preventDefault(),c(s.current.value)},isOpen:t,onClose:n,name:"change-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0410\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:Object(a.jsxs)("div",{className:"form__input-container",children:[Object(a.jsx)("input",{ref:s,name:"avatar",type:"url",className:"form__textinput form__textinput_type_change-avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0410\u0432\u0430\u0442\u0430\u0440",required:!0}),Object(a.jsx)("span",{className:"form__error",id:"avatar-error"})]})})};var g=function(e){var t=e.isOpen,n=e.onClose,c=e.onAddPlace,s=Object(r.useRef)(),o=Object(r.useRef)();return Object(a.jsxs)(x,{name:"adding",onSubmit:function(e){e.preventDefault(),c({name:s.current.value,link:o.current.value}),n()},isOpen:t,onClose:n,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",children:[Object(a.jsxs)("div",{className:"form__input-container",children:[Object(a.jsx)("input",{ref:s,name:"name",type:"text",className:"form__textinput form__textinput_type_adding-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30"}),Object(a.jsx)("span",{className:"form__error",id:"name-error"})]}),Object(a.jsxs)("div",{className:"form__input-container",children:[Object(a.jsx)("input",{ref:o,name:"link-address",type:"url",className:"form__textinput form__textinput_type_adding-link-address",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"form__error",id:"link-address-error"})]})]})};var C=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(l.a)(s,2),d=o[0],b=o[1],_=Object(r.useState)(!1),O=Object(l.a)(_,2),x=O[0],C=O[1],k=Object(r.useState)(!1),y=Object(l.a)(k,2),P=y[0],S=y[1],U=Object(r.useState)(!1),L=Object(l.a)(U,2),w=L[0],E=L[1],A=Object(r.useState)({link:"#",name:""}),T=Object(l.a)(A,2),D=T[0],I=T[1],q=Object(r.useState)({name:"",about:""}),J=Object(l.a)(q,2),F=J[0],R=J[1];function B(){b(!1),C(!1),S(!1),E(!1),I({link:"#",name:""})}return Object(r.useEffect)((function(){p.initialCards().then((function(e){c(e)}))}),[]),Object(r.useEffect)((function(){p.getUserInfo().then((function(e){R(e)}))}),[]),Object(a.jsx)(j.Provider,{value:F,children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("main",{className:"page",children:[Object(a.jsx)(m,{}),Object(a.jsx)(h,{cards:n,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===F._id}));p.changeLikeCardStatus(e._id,!t).then((function(t){var a=n.map((function(n){return n._id===e._id?t:n}));c(a)}))},onCardDelete:function(e){p.deleteCard(e._id).then((function(t){var a=n.filter((function(n){return n._id===e._id?t:n}));c(a)}))},onEditProfile:function(){C(!0)},onAddPlace:function(){S(!0)},onEditAvatar:function(){b(!0)},onClickCard:function(e){E(!0),I(e)}}),Object(a.jsx)(u,{})]}),Object(a.jsx)(v,{onUpdateUser:function(e){p.sendProfileInfo(e).then((function(e){R(e)})),B()},isOpen:x,onClose:B}),Object(a.jsx)(N,{onUpdateAvatar:function(e){p.changeAvatar(e).then((function(e){R(e)})),B()},isOpen:d,onClose:B}),Object(a.jsx)(g,{onAddPlace:function(e){p.sendNewCard(e).then((function(e){c([e].concat(Object(i.a)(n)))}))},isOpen:P,onClose:B}),Object(a.jsx)(f,{isOpen:w,onClose:B,card:D})]})})},k=(n(15),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))});o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),k()}},[[16,1,2]]]);
//# sourceMappingURL=main.c108ebe8.chunk.js.map